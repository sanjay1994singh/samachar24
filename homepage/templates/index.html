{% extends 'base.html' %}

{% block css %}
<style>
    .section-heading {
      font-size: 1.3rem;
      font-weight: 700;
      color: #fff;
      background: linear-gradient(90deg, #d32f2f, #b71c1c);
      padding: 10px 15px;
      border-left: 5px solid #ffeb3b;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-radius: 6px;
      display: inline-block;
    }
</style>

<style>
    .video-wrapper {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 16 / 9;   /* modern browsers */
      background: #000;
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

</style>
{% endblock css %}

{% block content %}
<div class="container">

    <div class="container my-4">
        <div class="row">
            <!-- Left Column: Live TV -->
            <div class="col-lg-7 col-md-12 mb-4">
                <h4 class="section-heading">‡§≤‡§æ‡§á‡§µ ‡§ü‡•Ä‡§µ‡•Ä / ‡§≤‡•á‡§ü‡•á‡§∏‡•ç‡§ü ‡§ñ‡§¨‡§∞‡•á‡§Ç</h4>
                <div class="video-wrapper">
                        <iframe
                                width="560"
                                height="315"
                                src="https://www.youtube.com/embed/zkgYCr7tGTM?autoplay=1&mute=1&playsinline=1"
                                title="YouTube video player"
                                frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                referrerpolicy="strict-origin-when-cross-origin"
                                allowfullscreen>
                        </iframe>
                    </div>
            </div>

            <!-- Right Column: Latest News -->
            <div class="col-lg-5 col-md-12">
                <h4 class="section-heading">‡§≤‡•á‡§ü‡•á‡§∏‡•ç‡§ü ‡§ñ‡§¨‡§∞‡•á‡§Ç</h4>
                <div class="list-group shadow-sm">
                    {% for i in latest_news %}
                    <a href="{% url 'news_detail' i.id %}" class="list-group-item list-group-item-action">
                        üö® {{i.title}}
                    </a>
                    {% endfor %}

                </div>
            </div>
        </div>
    </div>

    <hr>

    {% for category in categories %}
    <h2 class="section-title">{{ category.name }}</h2>

    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for i in category.news_set.all|dictsortreversed:"created_at"|slice:":3" %}
        <div class="col">
            <a href="{% url 'news_detail' i.id %}" style="text-decoration: none; color: inherit;">
                <div class="card h-100 shadow-sm">
                    <img src="{{ i.featured_image.url }}" class="card-img-top" alt="{{ i.title }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ i.title }}</h5>
                        <p class="card-text">{{ i.text|truncatewords:6 }}</p>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <!-- Centered More Button with Text -->
    <div class="d-flex justify-content-center align-items-center mt-3 gap-2">
        <span>More</span>
        <a href="{% url 'news_category' category.id %}"
           class="btn btn-primary btn-sm rounded-circle d-flex justify-content-center align-items-center"
           style="width:40px; height:40px; font-size:18px; line-height:1;">
            ‚Üí
        </a>
    </div>
    {% endfor %}


    <h2 class="section-title">Latest Videos</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
        {% for video in videos|slice:":4" %}
        <div class="col">
            <div class="card h-100 video-thumb">
                <a href="{{ video.url }}" target="_blank" rel="noopener noreferrer"
                   style="text-decoration: none; color: inherit;">
                    <img src="{{ video.thumbnail }}" alt="{{ video.title }}" class="card-img-top">
                    <div class="card-body">
                        <h6 class="card-title text-sm font-semibold">{{ video.title }}</h6>
                        <p class="card-text text-xs text-muted">{{ video.publishedAt|date:"F j, Y" }}</p>
                    </div>
                </a>
            </div>
        </div>
        {% endfor %}
    </div>


    <!--    <h2 class="section-title">Technology</h2>-->
    <!--    <div class="row row-cols-1 row-cols-md-3 g-4">-->
    <!--        <div class="col">-->
    <!--            <div class="card">-->
    <!--                <img src="https://source.unsplash.com/400x200/?tech,ai" class="card-img-top" alt="Tech News 1">-->
    <!--                <div class="card-body">-->
    <!--                    <h5 class="card-title">AI Set to Transform Workspaces</h5>-->
    <!--                    <p class="card-text">Experts predict major productivity boosts as AI tools are integrated into daily-->
    <!--                        office software.</p>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </div>-->
    <!--        <div class="col">-->
    <!--            <div class="card">-->
    <!--                <img src="https://source.unsplash.com/400x200/?5g,network" class="card-img-top" alt="Tech News 2">-->
    <!--                <div class="card-body">-->
    <!--                    <h5 class="card-title">5G Launch Across Tier-2 Cities</h5>-->
    <!--                    <p class="card-text">Telecom majors push for wider 5G rollout promising faster speeds and better-->
    <!--                        coverage.</p>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </div>-->
    <!--        <div class="col">-->
    <!--            <div class="card">-->
    <!--                <img src="https://source.unsplash.com/400x200/?space,satellite" class="card-img-top" alt="Tech News 3">-->
    <!--                <div class="card-body">-->
    <!--                    <h5 class="card-title">ISRO to Launch New Satellite</h5>-->
    <!--                    <p class="card-text">India‚Äôs space agency plans next-gen communication satellite launch from-->
    <!--                        Sriharikota next week.</p>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </div>-->
    <!--    </div>-->
</div>
{% endblock content %}

{% block js %}
{% endblock js %}